% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/FindRecalSeries.R
\name{FindRecalSeries}
\alias{FindRecalSeries}
\title{Attempts to find most suitable series for recalibration.}
\usage{
FindRecalSeries(
  df,
  global_min,
  global_max,
  number_of_combinations,
  abundance_score_threshold,
  peak_distance_threshold,
  coverage_threshold,
  fill_series
)
}
\arguments{
\item{df}{DataFrame An output from RecalList, containing recalibrant CH2 series.}

\item{global_min}{Float A lower bound of the instrument m/z range.}

\item{global_max}{Float A higher bound of the instrument m/z range.}

\item{number_of_combinations}{Integer Combinations of how many series should be computed. Default is 5, Recal function can
take up to 10 series, but the more combinations, the longer computing time is expected (growing exponentially)}

\item{abundance_score_threshold}{Float A threshold for filtering abundance score parameter. The series with higher values #' are better. Default value is 100.}

\item{peak_distance_threshold}{Float A threshold for the peak distance parameter. The closer this value is to 1, the
better.}

\item{coverage_threshold}{Integer How many \% of the m/z range should be covered. Default is 90 \%.}

\item{fill_series}{Boolean If TRUE, top 10 unique series will be returned, otherwise only the series from the best
combination will be returned.}
}
\value{
A dataframe of n-10 best-scoring series.
}
\description{
This function takes on input the CH2 homologous recalibration series, which are provided by the RecalList function #' and tries to find the most suitable series combination for recalibration based on the following criteria:
\enumerate{
\item Series should cover the full mass spectral range,
\item Series should be optimally long and combined have a â€œTall Peakâ€ at least every 100 m/z,
\item Abundance score: the higher, the better,
\item Peak score: the closer to 0, the better,
\item Peak Distance: the closer to 1, the better,
\item Series Score: the closer to this value, the better.
}
}
\details{
The recal function can take up to 10 series - due to the size of the search space when looking for combinations of 10
elements, a pre-filtering is done: only the series which have Abundance score > 100 are considered and the one #'
having Peak Distance < 2.
Combinations of 5 series are assembled, scores are computed for other metrics (in case of Peak proximity and Peak
distance, an inverted score is computed) and these are summed. Finally, top 10 unique series having the highest
score are outputted.

Warning: this step is in general computationally demanding, for ~30 series it took around 30 min.
}
